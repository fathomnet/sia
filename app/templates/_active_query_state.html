
{% macro display_active_query(classifier, itr, hits, row_width, form) %}

<!--Flask-->
<script>
var attribute = "{{ classifier.name|safe }}";
var classifier_id = "{{ classifier.id|safe }}";
var  iter = "{{ itr|safe }}";
var hit_data ={{ hits|safe }};
var img_baseurl = "{{ url_for('static', filename = 'blob/')  }}";
//console.log(hit_data);
var keyword = "{{ classifier.keyword.name|safe }}";
</script>


<div class="main-content">
  
  <div class="intro">
    <p id="title">
	<h1>This is a replay for <font color="#0977B5" id="keyword"></font>: iteration {{ itr|safe }}</h1>
    </p>

    <div id="exemplars" class="patch-container"></div>
  </div>
  <div id="container-panel">
      <div id="gallery">
          <h2>Top Detections on Training set</h2>
	  <h3> (Patches overlapping a more confident detection by > 0.3 are omitted.)</h3>
          <div id="gallery-container" class="patch-container">
          	<script>
          	row_width = {{row_width}};
          	num_images = Math.min(200,hit_data["TopConf.file"].length);
          	num_images = 200;
          	num_rows = Math.floor(num_images/row_width);

          	for (var i = 0; i < num_rows; i++){
          		var list = document.createElement("ul");
          		list.className = "patch-row";
          		list.id = "row" + i;
          		for ( var j = 0; j < row_width; j++){
          			listElement = document.createElement("li");
          			listElement.id = "gallery-" + i + "-" + j;
          			listElement.className = "image-patch";
          			list.appendChild(listElement);
          		}
          		$("#gallery-container").append(list);
          	}

          	</script>
          </div>
      </div>

  </div>
</div>


<script type="text/javascript" src="{{ url_for('static', filename='js/active_query.js') }}"></script>




{% endmacro %}




